<section class="card-container">
  <mat-card appearance="outlined">
    @if(isWaiting())
    { <mat-progress-bar mode="indeterminate"></mat-progress-bar> }
    <mat-card-header>
      <mat-card-title>
        Collections
        <mat-icon (click)="fetchCollections()">restart_alt</mat-icon>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-list>
        @for (collection of collections(); track collection) {
          <mat-list-item>
            <mat-icon matListItemIcon>folder</mat-icon>
            <h6 matListItemTitle>{{ collection.name }}</h6>
            <p matListItemLine>{{ collection.database }}, {{ collection.metadata }}</p>
            <nav class="collection-actions">
              <a (click)="deleteCollection(collection.name)">
                <mat-icon>delete</mat-icon>
              </a>
              <a (click)="getCollection(collection.name)">
                <mat-icon>analytics</mat-icon>
              </a>
            </nav>
          </mat-list-item>
        }
     </mat-list>
    </mat-card-content>
    <mat-card-actions align="end">
      <button (click)="reset()" mat-stroked-button color="warn" [disabled]="isWaiting()">Reset store</button>
    </mat-card-actions>
  </mat-card>
</section>
<section class="card-container">
  <mat-card appearance="outlined">
    <mat-card-header>
      <mat-card-title>
        Upload documents
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="fileForm">
        <br />
        <input type="file" required accept=".pdf" (change)="onFileSelected($event)"/>
        <br /><br />
        <div>
          <mat-form-field>
            <mat-label>Category</mat-label>
            <input type="text" matInput formControlName="category" name="category" required maxlength="20"/>
          </mat-form-field>
        </div>
        <div>
          <app-metadata [parentForm]="fileForm"></app-metadata>
        </div>
      </form>

    </mat-card-content>
    <mat-card-actions align="end">
      <button (click)="upload()" mat-stroked-button color="warn" [disabled]="isWaiting()" [attr.disabled]="fileForm.invalid || !!selectedFile">Upload</button>
    </mat-card-actions>
  </mat-card>
</section>
